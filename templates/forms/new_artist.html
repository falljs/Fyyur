{% extends 'layouts/main.html' %}
{% block title %}New Artist{% endblock %}
{% block content %}
  <div class="form-wrapper">
    <form id="artist_form">
      
      <h3 class="form-heading">List a new artist</h3>
      
      <div class="form-group">
        <label for="name">Name</label>
        <input class="form-control" type="text" id="name" name="name" autofocus=True>
      </div>

      <div class="form-group">
          <label>City & State</label>
          <div class="form-inline"> 
            <div class="form-group">
              <input class="form-control" type="text" id="city" name="city" placeholder="Dakar">
            </div> 
            <div class="form-group">
              <input class="form-control" type="text" id="state" name="state" placeholder="Senegal">
            </div>
          </div>
        </div>
      
        <div class="form-group">
          <label for="phone">Phone</label>
          <input class="form-control" type="text" id="phone" name="phone" placeholder="xx-xxx-xx-xx">
        </div>

        <div class="form-group">
          <label for="genres">Genres</label>
          <input class="form-control" type="text" id="genres" name="genres" placeholder="Example : Hip Hop">
        </div>

        <div class="form-group">
          <label for="facebook_link">Facebook Link</label>
          <input class="form-control" type="text" id="facebook_link" name="facebook_link" placeholder="http://facebook">
        </div>
      
        <div class="form-group">
          <label for="image_link">Image Link</label>
          <input class="form-control" type="text" id="image_link" name="image_link">
        </div>

        <div class="form-group">
          <label for="website">Website Link</label>
          <input class="form-control" type="text" id="website" name="website" placeholder="http://">
        </div>

        <div class="form-group">
          <label for="seeking_venue">Looking for Venues</label>
          <input class="form-control" type="text" id="seeking_venue" name="seeking_venue" placeholder="Yes | No">
        </div>

        <div class="form-group">
          <label for="seeking_description">Seeking Description</label>
          <input class="form-control" type="text" id="seeking_description" name="seeking_description">
        </div>
      <input type="submit" value="Create Artist" class="btn btn-primary btn-lg btn-block">
    </form>  
    <span id="error" class="hidden" style="color: #FF0000;">Erreur!</span>
    <span id="success" class="hidden">Saved!<a href="http://127.0.0.1:5000/artists">return to artist list</a></span>
    <script>
        // ADD Artist
        document.getElementById('artist_form').onsubmit = function(e) {
          e.preventDefault();
            fetch('/artists/create', {
              method : 'POST',
              body: JSON.stringify({
                'name': document.getElementById('name').value,
                'city': document.getElementById('city').value,
                'state': document.getElementById('state').value,
                'phone': document.getElementById('phone').value,
                'genres': document.getElementById('genres').value,
                'facebook_link': document.getElementById('facebook_link').value,
                'image_link': document.getElementById('image_link').value,
                'website': document.getElementById('website').value,
                'seeking_venue': document.getElementById('seeking_venue').value,
                'seeking_description': document.getElementById('seeking_description').value,
              }),
              headers: {
                'content-Type': 'application/json'
              }
            })
            .then(function(response) {
              return response.json();
            })
            .then(function(jsonResponse) {
              console.log(jsonResponse)
              document.getElementById('error').className = 'hidden';
              document.getElementById('success').className = '';
            })
            .catch(function() {
              document.getElementById('error').className = '';
              document.getElementById('success').className = 'hidden';
            })
        }
      </script> 
  </div>
{% endblock %}
